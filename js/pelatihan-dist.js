!function(){var e=[function(e,t,a){"use strict";a.r(t);var n=a(1);e=a.hmd(e);const r=(e,...t)=>e.replace(/{(\d+)}/g,((e,a)=>"undefined"!=typeof t[a]?t[a]:e)),o={onloadProgress:!1,price:[],learning_platform:[],sub_category:[],isInit:!1,filter:{},filterByTitle:"",curPage:1,pageCount:1,sortSetting:{by:"createdAt",method:"desc"},dataSubCategory:[],dataLearningPlatform:[]},i=e=>{const t=document.getElementById("count-pelatihan");t&&(t.innerHTML=`Ditemukan <b>${e}</b> pelatihan`)},c=e=>{const t=document.getElementById("list-pelatihan");if(!t)return;const a=e.map((e=>{let t=e.price?e.price:0,a=e.price_final?e.price_final:0;const r=100-Math.floor(a/t*100);let o;return o=0==a?"Gratis":a,`\n            <div class="col-12 col-md-6 col-lg-4 mb-4">\n                <div class="card course-card">\n                    <a class="text-decoration-none to-detail-course" href="/pelatihan/detail-pelatihan.html?title=${(0,n.formatedString)(e?.name)}-${e?.documentId}" title="${e?.name}">\n                        <div class="card-cover">\n                            <img class="card-img-top" src="${e?.image[0].url}" alt="${e?.name}">\n                            <div class="card-cover-overlay">\n                                <div class="d-flex justify-content-between align-middle">\n                                    <div class="align-self-center">\n                                        <div class="card-company">\n                                            <img class="me-1 card-logo" src="${e?.learning_platform?.image[0]?.url}" alt="${e?.learning_platform?.name}">\n                                            <span class="course-lp-name">${e?.learning_platform?.name}</span>\n                                        </div>\n                                    </div>\n                                    <div class="align-self-center">\n                                        <span class="badge rounded-pill text-capitalize text-bg-warning">Self-Paced Learning</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="card-body">\n                            <h6 class="mb-1 course-title text-capitalize" title="${e?.meta_seo[0]?.meta_title}">${e?.name}</h6>\n                            <div class="d-flex my-2">\n                                <span class="badge text-bg-light text-capitalize badge-ellipsis" title="${e?.sub_category?.name}">${e?.sub_category?.name}</span>\n                            </div>\n                            <div>\n                                <div class="course-real-price mb-1">\n                                    <span class="me-2">Rp <b>${t}</b></span>\n                                    <span class="badge text-bg-success">${r}%</span>\n                                </div>\n                                <div class="course-price card-price mb-1 color-tertiary">Rp <b>${o}</b></div>\n                            </div>\n                        </div>\n                    </a>\n                </div>\n            </div>\n        `})).join("");1===o.curPage?t.innerHTML=a:t.insertAdjacentHTML("beforeend",a)},l=()=>{const e=document.getElementById("load-more-pelatihan");o.curPage>=o.pageCount&&(e.style.display="none");const t=document.getElementById("search-input");t&&t.addEventListener("input",(function(){o.filterByTitle=t.value})),t.addEventListener("keypress",(function(e){"Enter"===e.key&&p(undefined,undefined)})),e&&e.addEventListener("click",(()=>{o.curPage>=o.pageCount?e.style.display="none":(o.curPage+=1,p(undefined,{size:10,curr:o.curPage}))}));const a=document.getElementById("sort-pelatihan");a&&a.addEventListener("change",(()=>{const e={0:{by:"createdAt",method:"desc"},1:{by:"createdAt",method:"asc"},2:{by:"price_final",method:"desc"},3:{by:"price_final",method:"asc"}};o.sortSetting=e[a.value]||e[0],p(o.sortSetting,undefined)}));const n=document.getElementById("show-filter-pelatihan");n&&n.addEventListener("click",(()=>{document.querySelectorAll("div[name=sub-category-by-name]").forEach((e=>{e.hasChildNodes()||m(e)}));document.querySelectorAll("div[name=learning-platform-by-name]").forEach((e=>{e.hasChildNodes()||f(e)}))}))},s=(e,t)=>{const a=document.querySelectorAll(`input[type=checkbox][name=${e}]`);a.forEach((e=>{e.addEventListener("change",(()=>{o[t]=Array.from(a).filter((e=>e.checked)).map((e=>e.value)),p(undefined,undefined)}))}))},d=async(e,t,a)=>{const r=t?.by||o.sortSetting.by,i=t?.method||o.sortSetting.method,c=a?.curr||1,l=a?.size||10,s=`${n.API_CONFIG.baseUrl}/courses?populate[0]=meta_seo&populate[1]=image&populate[2]=learning_platform.image&populate[3]=sub_category&sort[0][${r}]=${i}&pagination[page]=${c}&pagination[pageSize]=${l}&${(()=>{const t=[];return e?.byTitle&&t.push(`filters[name][$containsi]=${encodeURIComponent(e.byTitle)}`),e?.byPrice?.length&&e.byPrice.forEach(((e,a)=>{const n=parseInt(e);isNaN(n)||t.push(`filters[$or][${a}][price_final][$eq]=${n}`)})),e?.learning_platform?.length&&e.learning_platform.forEach(((e,a)=>{t.push(`filters[$or][${a}][learning_platform][name][$eq]=${encodeURIComponent(e)}`)})),e?.sub_category?.length&&e.sub_category.forEach(((e,a)=>{t.push(`filters[$or][${a}][sub_category][name][$eq]=${encodeURIComponent(e)}`)})),t.join("&")})()}`;try{const e=await fetch(s,{method:"GET",headers:{Authorization:`Bearer ${n.API_CONFIG.token}`}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(d){throw console.error("API call failed:",d),d}},m=async e=>{try{if(0===o.dataSubCategory.length){const e=await fetch(`${n.API_CONFIG.baseUrl}/sub-categories?populate[0]=category&filters[category][name][$eq]=pelatihan`,{method:"GET",headers:{Authorization:`Bearer ${n.API_CONFIG.token}`}}),t=await e.json();o.dataSubCategory=t.data}if(!e){const t=document.getElementById("sub-category");t&&(e=t)}e&&(o.dataSubCategory.forEach((t=>{const a=document.createElement("div");a.className="form-check",a.id=(0,n.formatedString)(t.name),a.innerHTML=`\n                    <input class="form-check-input filter-sub-category" id="filter-sub-category-${(0,n.formatedString)(t.name)}" type="checkbox" value="${t.name}" name="sub_category">\n                    <label class="form-check-label text-capitalize" for="filter-sub-category-${(0,n.formatedString)(t.name)}">${t.name}</label>\n                `,a.style.display="block",e.appendChild(a)})),s("sub_category","sub_category"))}catch(t){console.error("Failed to fetch sub categories:",t)}},f=async e=>{try{if(0===o.dataLearningPlatform.length){const e=await fetch(`${n.API_CONFIG.baseUrl}/learning-platforms`,{method:"GET",headers:{Authorization:`Bearer ${n.API_CONFIG.token}`}}),t=await e.json();o.dataLearningPlatform=t.data}if(!e){const t=document.getElementById("course-trending");t&&(e=t)}e&&(o.dataLearningPlatform.forEach((t=>{const a=document.createElement("div");a.className="form-check",a.id=(0,n.formatedString)(t.name),a.innerHTML=`\n                    <input class="form-check-input filter-learning-platform" id="filter-learning-platform-${(0,n.formatedString)(t.name)}" type="checkbox" value="${t.name}" name="learning_platform">\n                    <label class="form-check-label text-capitalize" for="filter-learning-platform-${(0,n.formatedString)(t.name)}">${t.name}</label>\n                `,e.appendChild(a)})),s("learning_platform","learning_platform"))}catch(t){console.error("Failed to fetch learning platforms:",t)}},u=async(e,t,a)=>{try{const n=await d(e,t,a);i(n.meta.pagination.total),c(n.data),o.pageCount=n.meta.pagination.pageCount,o.isInit||(o.isInit=!0,await Promise.all([m(),f()]),l(),s("price","price"))}catch(n){console.error("Failed to initialize:",n)}},p=(e,t)=>{if(o.filter={byTitle:o.filterByTitle,byPrice:o.price,learning_platform:o.learning_platform,sub_category:o.sub_category},!t){const e=document.getElementById("list-pelatihan");e&&(e.innerHTML=""),o.curPage=1}u(o.filter,e||o.sortSetting,t)};window.addEventListener("load",(()=>{o.onloadProgress||(o.onloadProgress=!0,u(o.filter,o.sortSetting,{size:10,curr:1}))})),e.exports&&(e.exports={state:o,API_CONFIG:n.API_CONFIG,formatString:r,updatePelatihanCount:i,updatePelatihanList:c,setupEventListeners:l,callApiCourse:d,callApiSubCategory:m,callApiLearningPlatform:f,init:u,callFilter:p})},function(e){e.exports&&(e.exports={API_CONFIG:{baseUrl:"https://cms.jaripmi.info/api",token:"6c013a98cfcd42a222a5517e46f066414f6371cf47e92c04966f33ac70c3fb51a892135a0fd3c918ac3f59c70c3df38513a321392f45847e3c9ec217648582a48e41eed5f93836d87d6d9f32ebc689d99971bff71af373dc05e99b9528916d92e4178983fbc6b36312cf5fd3bd09eeab7e474da4bc0c533274baae0c1bfba13d"},formatedString:e=>{let t=e.replace(/[^a-zA-Z0-9]+/g,"-");return t=t.replace(/-+/g,"-"),t=t.replace(/^[-]+|[-]+$/g,""),t}})}],t={};function a(n){var r=t[n];if(r!==undefined)return r.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n](o,o.exports,a),o.loaded=!0,o.exports}a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};a(0)}();
//# sourceMappingURL=pelatihan-dist.js.map